
@{
	ViewBag.Title = "CategoryTable";
}

<h2>CategoryTable</h2>

@model List<Category>


<form>
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<input class="form-control" id="searchText" name="Search" placeholder="Search any Category here...." />
			</div>
			<div class="col-md-4">
				<button type="button" id="searchBtn"> Search</button>
				<button type="button" id="newBtn">New</button>
			</div>

		</div>

	</div>

</form>



<table class="table table-striped">
	<thead>
		<tr>
			<td>CategoryName</td>
			<td>Description</td>
			<td>Image</td>
			<td>IsFeatured</td>
			<td>Actions</td>
		</tr>
	</thead>
	<tbody>
		@foreach (var category in Model)
		{
		<tr>
			<td>@category.Name</td>
			

			<td>@category.Description</td>

			<td><img height="200px" width="200px" src="@category.Imagepath" alt="Cateogory Image" /></td>

			<td>@category.IsFeatured</td>

			<td>
				<button class="EditBtn" data-id="@category.ID">Edit</button>
				<button class="DeleteBtn" data-id="@category.ID">Delete</button>
			</td>

		</tr>
		}
	</tbody>

</table>


<style>
	table, th, td {
		border: 2px solid black;
	}
</style>
<script>

	$("#searchBtn").click(function myfunction() {
		debugger;
		var searchvalue = $("#searchText").val();
		$.ajax({
			//url: '/Category/CategoriesTable',
			url: '@Url.Action("CategoriesTable", "Category")',
			data:
			{
				search: searchvalue
			},
		})
        .done(function (response) {
        	$("#tableContainer").html(response);
        })
        .fail(function (XMLHttpRequest, textStatus, errorThrown) {
        	alert("Ajax Request Failed");
        });
	});


	$("#newBtn").click(function myfunction(){
		$.ajax({
			//url: '/Category/Create'
			url:'@Url.Action("Create","Category")',
			
		})
			.done(function (response) {
				$("#createCategory").html(response);
				focusAction();
        })
        .fail(function (XMLHttpRequest, textStatus, errorThrown) {
        	alert("Ajax Request Failed");
        });
	});

	$(".EditBtn").click(function myfunction() {
		$.ajax({
			//url: '/Category/Edit',
			url: '@Url.Action("Edit","Category")',
			data:
			{
					Id: $(this).attr("data-id")
			}
		})
			.done(function (response) {
				$("#createCategory").html(response);
				focusAction();

			})
			.fail(function (XMLHttpRequest, textStatus, errorThrown) {
				alert("Ajax Request Failed");
			});
	});

	$(".DeleteBtn").click(function myfunction() {

		var confirmDelete = confirm("Are you sure you want to delete this category?");
		if (confirmDelete) {
		$.ajax({
			type: 'Post',
			//url: '/Category/Delete',
			url: '@Url.Action("Delete","Category")',
			data:
			{
					Id: $(this).attr("data-id")
			}
		})
			.done(function (response) {
				$("#tableContainer").html(response);

			})
			.fail(function (XMLHttpRequest, textStatus, errorThrown) {
				alert("Ajax Request Failed");
			});
		}
	});

	function focusAction() {
		$('html,body').animate({
			scrollTop: $("#createCategory").offset().top - 100
					}, 1000);
				}

</script>
